<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Switch Game</title>
    <style>
        canvas {
            border: 1px solid black;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="600"></canvas>

    <script>
        var canvas = document.getElementById("gameCanvas");
        var ctx = canvas.getContext("2d");

        var ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 10,
            velocityY: 0,
            jumpHeight: -5,
            colorIndex: 0,
            colors: ["#FF0000", "#00FF00", "#0000FF", "#FFFF00"]
        };

        var obstacles = [];
        var obstacleSpeed = 2;
        var obstacleInterval = 1000; // Adjust obstacle spawning rate
        var lastObstacleTime = 0;

        function drawBall() {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = ball.colors[ball.colorIndex];
            ctx.fill();
            ctx.closePath();
        }

        function drawObstacles() {
            for (var i = 0; i < obstacles.length; i++) {
                var obstacle = obstacles[i];
                ctx.beginPath();
                ctx.arc(obstacle.x, obstacle.y, obstacle.radius, 0, Math.PI * 2);
                ctx.fillStyle = obstacle.color;
                ctx.fill();
                ctx.closePath();
            }
        }

        function updateBall() {
            ball.y += ball.velocityY;
            ball.velocityY += 0.1; // Gravity

            // Prevent the ball from falling off the bottom of the screen
            if (ball.y + ball.radius > canvas.height) {
                ball.y = canvas.height - ball.radius;
                ball.velocityY = 0;
            }

            // Prevent the ball from going above the top of the screen
            if (ball.y - ball.radius < 0) {
                ball.y = ball.radius;
                ball.velocityY = 0;
            }
        }

        function updateObstacles() {
            var currentTime = new Date().getTime();
            if (currentTime - lastObstacleTime > obstacleInterval) {
                var randomX = Math.random() * canvas.width;
                var randomColorIndex = Math.floor(Math.random() * ball.colors.length);
                obstacles.push({ x: randomX, y: -30, radius: 15, color: ball.colors[randomColorIndex] });
                lastObstacleTime = currentTime;
            }

            for (var i = 0; i < obstacles.length; i++) {
                obstacles[i].y += obstacleSpeed;

                // Remove obstacles that are out of the canvas
                if (obstacles[i].y > canvas.height + obstacles[i].radius) {
                    obstacles.splice(i, 1);
                    i--;
                }
            }
        }

        function checkCollision() {
            for (var i = 0; i < obstacles.length; i++) {
                var dy = ball.y - obstacles[i].y;
                var distance = Math.sqrt(dy * dy);

                if (distance < ball.radius + obstacles[i].radius) {
                    if (ball.colors[ball.colorIndex] === obstacles[i].color) {
                        // Pass through obstacle of the same color
                        obstacles.splice(i, 1);
                        i--;
                    } else {
                        gameOver();
                    }
                }
            }
        }

        function gameOver() {
            alert("Game Over!");
            location.reload(); // Reload the page to restart the game
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawBall();
            drawObstacles();

            updateBall();
            updateObstacles();
            checkCollision();

            requestAnimationFrame(draw);
        }

        document.addEventListener("keydown", function(event) {
            if (event.keyCode === 32) { // Spacebar to jump
                ball.velocityY = ball.jumpHeight;
            } else if (event.keyCode === 37) { // Left arrow to change ball color left
                ball.colorIndex = (ball.colorIndex + ball.colors.length - 1) % ball.colors.length;
            } else if (event.keyCode === 39) { // Right arrow to change ball color right
                ball.colorIndex = (ball.colorIndex + 1) % ball.colors.length;
            }
        });

        draw();
    </script>
</body>
</html
